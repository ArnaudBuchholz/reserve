<html>
  <head>
    <script src="/gpf.js"></script>
    <script src="/proxy/https/arnaudbuchholz.github.io/blog/jsfiddle-assert.js"></script>
    <script src="/assertions.js"></script>
    <script>

function onLoad () {
  assert(document.getElementById("imgOK").naturalWidth !== 0, "/proxy/http/facetheforce.today/luke/200 loaded")
  assert(document.getElementById("imgKO").naturalWidth === 0, "/proxy/http/facethe4th.tomorrow/luke/200 failed")
  assertions()
    .then(function () {
      if (document.querySelector(".assert.ko")) {
        throw new Error("At least one assertion failed")
      }
    })
    .then(function () {
      gpf.http.get('/chrome/OK')
    })
    .catch(function (reason) {
      assert(false, reason.toString());
      gpf.http.get('/chrome/KO')
    });
}

    </script>
  </head>
  <body onload="onLoad()">
    <img id="imgOK" src="/proxy/http/facetheforce.today/luke/200" />
    <img id="imgKO" src="/proxy/http/facethe4th.tomorrow/luke/200" />
  </body>
</html>
